name: Features
description: 'Some'
branding:
  icon: 'chevrons-up'  
  color: 'green'

runs:
  using: "composite"
  steps:
    - name: GET ENV
      shell: bash
      run: |
        echo "TESTBOX_BRANCH_PLATFORM=${{ env.TESTBOX_BRANCH_PLATFORM }}" 
        echo "ANVIL_NUMBER=${{ env.ANVIL_NUMBER }}"
    - name: Check Always
      shell: bash
      if: always()
      run: |
        base_url='https://console.cloud.google.com/logs/query'
        
        url_params="query=resource.labels.namespace_name%3D~%22github-features-staff-portal-15120-1%22"
        time_range="timeRange=$(date --utc +%FT%TZ -d '30 minutes ago')%2F$(date --utc +%FT%TZ -d '+2 hour')"
        logs_link="${base_url};${url_params};${time_range}?project=toptal-ci"
        echo "::warning::Google Logs: ${logs_link}"
        
                
        url_params="query=resource.labels.namespace_name%3D~%22github-features-staff-portal-15120-1%22"
        time_range="timeRange=2022-04-15T15:37:39.560Z%2F2022-04-15T16:37:39.560Z"
        logs_link="${base_url};${url_params};${time_range}?project=toptal-ci"
        echo "::warning::Google Logs: ${logs_link}"
        
                        
        url_params="query=resource.type=\"k8s_container\" resource.labels.cluster_name=\"testbox\" resource.labels.namespace_name=~\"github-features-staff-portal-15120-1\""
        time_range="timeRange=2022-04-15T15:37:39.560Z%2F2022-04-15T16:37:39.560Z"
        logs_link="${base_url};${url_params};${time_range}?project=toptal-ci"
        printf "\e]8;;${logs_link}\e\\This is a link\e]8;;\e\\\n"

        echo "::warning::Google Logs: `printf "\e]8;;${logs_link}\e\\This is a link\e]8;;\e\\\n"`"
        
        

